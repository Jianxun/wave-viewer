# T-043 - Plot Rename Persistence

## Task summary (DoD + verify)
- Add host-backed rename intent path and remove local-only rename state mutation.
- Keep rename validation deterministic (trimmed non-empty names).
- Add test coverage for rename persistence after host patch/reload.
- Verify:
  - `npm test -- tests/extension/smoke.test.ts`
  - `npm run lint`

## Read
- `agents/context/lessons.md`
- `agents/context/contract.md`
- `agents/context/tasks.yaml`
- `agents/context/tasks_state.yaml`
- `agents/context/project_status.md`
- `src/webview/main.ts`
- `src/extension/commands.ts`
- `src/core/dataset/types.ts`
- `src/extension/types.ts`
- `tests/extension/smoke.test.ts`
- `tests/unit/protocol/messages.test.ts`

## Plan
1. Add failing tests for rename intent handling and persistence behavior.
2. Add rename intent contract/validation in shared protocol + extension message union.
3. Replace webview local rename dispatch with host intent post.
4. Handle rename intent in host transaction pipeline and emit `host/statePatch`.
5. Run verification, close out scratchpad, update task state, push branch, and open PR.

## Milestone notes
- Intake: `T-043` was `ready`; moved to `in_progress`, linted task state, and created branch `feature/T-043-plot-rename-persistence`.

## Patch summary
- Pending.

## PR URL
- Pending.

## Verification
- Pending.

## Status request
- In Progress.

## Blockers / Questions
- None.

## Next steps
- Add failing tests, implement rename intent path, and run required verification commands.
