# T-010 Scratchpad

## Task summary (DoD + verify)
- Update Axis Manager interactions to reflect lane semantics (top/bottom ordering, not overlay side controls).
- Add explicit reorder actions in UI and reducer integration.
- Keep signal-to-axis assignment workflow explicit and consistent with trace-instance model.
- Ensure axis deletion/reassignment UX remains deterministic and validation-safe.
- Verify:
  - `npm run lint`
  - `npm test`

## Read (paths)
- agents/context/lessons.md
- agents/context/contract.md
- agents/context/tasks.yaml
- agents/context/tasks_state.yaml
- agents/context/project_status.md
- doc/specs/domain-stacked-shared-x-implementation.md
- agents/adr/ADR-0002-domain-stacked-yaxes-shared-x.md
- src/webview/components/AxisManager.ts
- src/webview/components/SignalList.ts
- src/webview/components/TraceList.ts
- src/webview/main.ts
- src/webview/state/workspaceState.ts
- src/webview/state/reducer.ts
- tests/unit/webview/workspaceState.test.ts

## Plan
1. Replace axis-side UI controls with lane-order interactions in Axis Manager.
2. Wire explicit axis reorder actions from UI into reducer (`axis/reorder`).
3. Clarify signal/trace assignment labels to include lane position context.
4. Add tests for new lane-label utility and deterministic axis reassignment validation.
5. Run full verify commands and prepare review handoff.

## Milestone notes
- 2026-02-11: Intake complete for `T-010`; task moved to `in_progress`, linted task state, and branch `feature/T-010-axis-manager-lanes` created.
- 2026-02-11: Axis Manager switched from overlay-side controls to lane controls with move up/down actions and explicit reassignment target selection.
- 2026-02-11: Signal and trace axis selectors now show `Y* (Lane N)` labels for assignment clarity.
- 2026-02-11: Added `axisLabels` unit tests and strengthened workspace-state validation coverage for invalid self-reassignment on axis removal.

## Patch summary
- Updated `src/webview/components/AxisManager.ts`:
  - removed left/right side selector controls
  - added `Move Up` / `Move Down` lane reorder buttons
  - added explicit lane label text (`Top`/`Middle`/`Bottom`)
  - retained deterministic reassignment + remove actions
- Updated `src/webview/main.ts`:
  - wired `onReorderAxis` to reducer action `axis/reorder`
- Updated `src/webview/components/SignalList.ts` and `src/webview/components/TraceList.ts`:
  - axis dropdown options now include lane-number labels
- Added `src/webview/components/axisLabels.ts`:
  - shared helpers for lane numbering and display labels
- Updated `src/webview/styles.css`:
  - expanded axis-row layout for reorder + reassignment controls
- Added `tests/unit/webview/axisLabels.test.ts`:
  - verifies lane number and label formatting behavior
- Updated `tests/unit/webview/workspaceState.test.ts`:
  - added guard test for invalid self-reassignment during axis removal

## PR URL
- Pending PR creation.

## Verification
- `npm run lint` ✅
- `npm test -- tests/unit/webview/axisLabels.test.ts tests/unit/webview/workspaceState.test.ts` ✅
- `npm test` ✅

## Status request
- Ready for Review (after PR is opened and `tasks_state.yaml` is updated with PR number)

## Blockers / Questions
- None.

## Next steps
- Push branch and open PR to `main`.
- Set `T-010` to `ready_for_review` with PR number, keep `merged: false`.
