# T-052 â€” Add frozen bundle export (separate frozen CSV + frozen layout YAML)

## Task summary (DoD + verify)
- Add command flow to export frozen bundle artifacts: `<name>.frozen.csv` and `<name>.frozen.wave-viewer.yaml`.
- Ensure frozen export never rebinds or overwrites the active interactive layout/session.
- Include required signal columns (all per-plot x signals + referenced y signals) deterministically in frozen CSV output.
- Verify:
  - `npm test -- tests/extension/smoke.test.ts`
  - `npm run lint`

## Read (paths)
- `agents/context/lessons.md`
- `agents/context/contract.md`
- `agents/context/tasks.yaml`
- `agents/context/tasks_state.yaml`
- `agents/context/project_status.md`
- `agents/adr/ADR-0014-frozen-bundle-artifacts-supersede-dual-modes.md`

## Plan
1. Inspect existing export command/spec flows and current smoke coverage.
2. Add frozen bundle export implementation and deterministic reduced CSV generation.
3. Add/update tests for frozen command behavior and non-rebinding guarantees.
4. Run task verify commands and close out task metadata.

## Milestone notes
- Intake complete: selected `T-052`, read required context, and moved task to `in_progress`.
- Added TDD smoke coverage for frozen bundle command ID, deterministic frozen artifact emission, and missing-signal failure behavior.
- Implemented frozen export command flow, deterministic CSV subset serialization, and extension command wiring/package contributions.
- Verification complete: task verify commands passed locally.

## Patch summary
- Added frozen bundle export command `waveViewer.exportFrozenBundle` that:
  - resolves the focused viewer's bound interactive session context,
  - writes paired artifacts `<name>.frozen.csv` + `<name>.frozen.wave-viewer.yaml`,
  - keeps active interactive dataset/layout bindings untouched,
  - validates missing workspace-referenced signals before writing,
  - emits deterministic frozen CSV columns by source dataset column order filtered to required signals (all plot `xSignal` + referenced trace signals).
- Added reusable CSV serializer utility in `src/core/csv/parseCsv.ts` for deterministic selected-column CSV export.
- Registered the new command in extension activation and `package.json` command contributions.
- Added smoke tests covering command ID export, successful deterministic frozen export, and missing-signal rejection.

## PR URL
- Pending (to be filled from PR creation output).

## Verification
- `npm test -- tests/extension/smoke.test.ts` (pass)
- `npm run lint` (pass)

## Status request (Done / Blocked / In Progress)
- Done

## Blockers / Questions
- None currently.

## Next steps
- Push branch, open PR to `main`, then set `T-052` to `ready_for_review` with PR number and lint task state.
