# T-025 — Restore Explorer signal actions for standalone viewer launch

## Task summary (DoD + verify)
- Fix regression where Explorer `Add Signal to Plot` does nothing after launching Wave Viewer without an active CSV editor.
- Keep reducer semantics unchanged for side-panel actions (`add-to-plot`, `add-to-new-axis`, `reveal-in-plot`).
- Ensure host emits explicit actionable warning when no target viewer can accept a side-panel action.
- Add/adjust smoke tests covering standalone launch + side-panel action flow.

Verify:
- `npm run lint`
- `npm test -- tests/extension/smoke.test.ts`

## Read (paths)
- `agents/context/lessons.md`
- `agents/context/contract.md`
- `agents/context/tasks.yaml`
- `agents/context/tasks_state.yaml`
- `agents/context/project_status.md`
- `doc/specs/side-panel-workflow.md`
- `src/extension.ts`
- `src/webview/main.ts`
- `tests/extension/smoke.test.ts`

## Plan
- Inspect current side-panel action routing and standalone viewer launch behavior.
- Add failing/updated smoke coverage for standalone launch + Explorer action.
- Implement minimal extension-host fix to route actions to a valid viewer session and warn when unavailable.
- Run verify commands and finalize task handoff.

## Milestone notes
- Intake complete; task moved to in-progress.
- Added side-panel action dispatch helper in extension host that supports fallback binding to a standalone viewer panel.
- Added explicit warning message path for side-panel actions when no eligible viewer panel exists.
- Added smoke regressions for standalone panel binding flow and no-target warning.
- Verification commands pass.

## Patch summary
- `src/extension.ts`
  - Added `runResolvedSidePanelSignalAction` to preserve reducer semantics while routing side-panel actions to either a dataset-bound panel or a standalone panel.
  - Added standalone fallback behavior that binds the panel to the selected dataset and posts `host/datasetLoaded` before `host/workspacePatched`.
  - Added explicit actionable warning builder `createNoTargetViewerWarning` for no-target action attempts.
  - Reused shared dataset payload construction through `createDatasetLoadedPayload`.
  - Tracked standalone-opened viewer panels in `activate` and wired disposal cleanup.
- `tests/extension/smoke.test.ts`
  - Added `T-025` smoke tests covering:
    - standalone viewer binding on side-panel add action, including message ordering
    - explicit warning when no viewer target exists

## PR URL
- Pending branch push / PR creation.

## Verification
- `npm test -- tests/extension/smoke.test.ts` ✅
- `npm run lint` ✅

## Status request
- In Progress (ready for PR open + state transition).

## Blockers / Questions
- None.

## Next steps
- Commit, push branch, open PR to `main`, set `T-025` to `ready_for_review` with PR number, and re-run task-state linter.
