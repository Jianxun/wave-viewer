# T-067 Scratchpad

## Task summary (DoD + verify)
- Introduce layout schema `version: 3` with signal refs persisted as `{ base, accessor? }`.
- Keep runtime trace identity stable while decoupling persistence from flat accessor-string parsing.
- Reject non-v3 layout imports with actionable errors and update docs/tests accordingly.
- Ensure deterministic export ordering and roundtrip stability with accessor-bearing traces.

Verify:
- `npm test -- tests/unit/core/spec/importSpec.test.ts tests/unit/core/spec/exportSpec.test.ts tests/unit/spec/roundtrip.test.ts tests/unit/spec/importErrors.test.ts`
- `npm run lint`

## Read (paths)
- `agents/context/contract.md`
- `agents/adr/ADR-0021-host-side-complex-projection-and-structured-signal-refs.md`
- `src/core/spec/importSpec.ts`
- `src/core/spec/exportSpec.ts`
- `src/core/spec/plotSpecV1.ts`
- `tests/unit/core/spec/importSpec.test.ts`
- `tests/unit/core/spec/exportSpec.test.ts`
- `tests/unit/spec/roundtrip.test.ts`
- `tests/unit/spec/importErrors.test.ts`
- `doc/specs/wave-viewer-mvp.md`

## Notes
- Persistence schema is structured (`{base, accessor?}`), not tuple string parsing.
