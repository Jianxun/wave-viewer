# T-055 Scratchpad

## Task Summary (DoD + Verify)
- Title: Redefine v2 layout schema to support multi-dataset workspaces
- DoD:
  - Replace single-dataset `version: 2` layout contract (`dataset.path`) with multi-dataset `datasets[]` + `active_dataset`.
  - Require dataset-qualified references for all persisted signal bindings (`x.dataset` + `x.signal`, and `signals[label] -> {dataset, signal}`).
  - Keep schema version at `2` and intentionally reject legacy single-dataset v2 payloads (no compatibility branch).
- Verify:
  - `npm test -- tests/unit/core/spec/importSpec.test.ts tests/unit/core/spec/exportSpec.test.ts`
  - `npm run lint`

## Read
- `agents/roles/executor.md`
- `agents/context/lessons.md`
- `agents/context/contract.md`
- `agents/context/tasks.yaml`
- `agents/context/tasks_state.yaml`
- `agents/context/project_status.md`
- `agents/adr/ADR-0015-v2-layout-multi-dataset-single-workspace.md`
- `doc/specs/wave-viewer-mvp.md`
- `src/core/spec/plotSpecV1.ts`
- `src/core/spec/importSpec.ts`
- `src/core/spec/exportSpec.ts`
- `tests/unit/core/spec/importSpec.test.ts`
- `tests/unit/core/spec/exportSpec.test.ts`

## Plan
1. Add tests for multi-dataset v2 import/export semantics and legacy v2 rejection.
2. Implement schema and serializer/parser changes in spec core files.
3. Run targeted verification, then lint, then close out with PR.

## Milestone Notes
- Intake complete; task set to `in_progress`; state lint passed.
- Branch: `feature/T-055-multi-dataset-v2-schema`.

## Patch Summary
- Pending.

## PR URL
- Pending.

## Verification
- Pending.

## Status Request
- In Progress

## Blockers / Questions
- None currently.

## Next Steps
- Implement TDD test updates and schema migration in core spec import/export.
